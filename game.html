<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>
<script>


    $(document).ready(function () {

        /* Qd clica Btn SUBMIT */
        $("#send").click(function () {

            $('#email').css({"border": "1px solid gray"});
            $('#name').css({"border": "1px solid gray"});
            $('#tlf').css({"border": "1px solid gray"});

            var erros = 0;

            /* validar email */
            function isInvalidaEmail(email) {
                var email = $('#email').val();
                var atpos = email.indexOf("@");
                var dotpos = email.lastIndexOf(".");
                return (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= email.length)
            }

            /* se houver erros */
            if ((($('#email').val() == "")) || (isInvalidaEmail($('#email').val()))) {
                $('#email').css({"border": "2px solid red"});
                erros=1;
            }

            if (($('#tlf').val() == "")) {
                $('#tlf').css({"border": "2px solid red"});
                erros=1;
            }

            if (($('#name').val() == "")) {
                $('#name').css({"border": "2px solid red"});
                erros=1;
            }

            /* SE NAO HOUVER ERROS*/
            if (erros==0){

                var email = $('#email').val();
                var name = $('#name').val();
                var tlf = $('#tlf').val();
                var answer1 = $('#answer1').val();
                var answer2 = $('#answer2').val();

                alert(answer1);
                alert(answer2);

            }
        });

        /* imprime as opções possiveis para a ANSWER 1*/
        $.get("http://192.168.1.110:8080/webquest/getfacilities", function (data) {
            console.log("data ", data);
            var facilityopts = "";
            for (var i = 0; i < data.length; i++) {
                facilityopts = facilityopts + '<option value="' + data[i].Id + '">' + data[i].Name + '</option>'
            }
            $('#answer1').html(facilityopts);

        });

        /* imprime as opções possiveis para a ANSWER 2*/
        $.get("http://192.168.1.110:8080/webquest", function (data) {
            $("#question1").html(data.Question1);
            $("#question2").html(data.Question2);
            $("#prizes").html(data.Prizes);
            $("#rules").html(data.Rules);
            var daysopts = "";
            for (var i = 1; i <= 31; i++) {
                daysopts = daysopts + '<option value="' + i + '">' + i + '</option>'
            }
            $('#answer2').html(daysopts);
        });
    });
</script>

<style>
    #main-wrp p {
        margin: 0;
    }

    .tbl th {
        width: 200px;
        text-align: left;
    }
</style>

<div id="main-wrp">

    <div id="prizes"></div>

    <div id="question1"></div>

    <table class="tbl">
        <tbody>
        <tr>
            <th>Facility</th>
            <td><select id="answer1"> </select></td>
        </tr>
        </tbody>
    </table>
    <div id="question2"></div>

    <table class="tbl">
        <tbody>
        <tr>
            <th>Day of the month</th>
            <td>
                <select id="answer2">
                </select>
            </td>
        </tr>
        </tbody>
    </table>

    <div id="rules"></div>
    <form>
        <table class="tbl">
            <tbody>
            <tr>
                <th> Name</th>
                <td><input type="text" required id="name"></td>
            </tr>
            <tr>
                <th> Email</th>
                <td><input type="email" required id="email"></td>
            </tr>
            <tr>
                <th> Telephone</th>
                <td><input type="text" required id="tlf"></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button type="reset"> Clean</button>
                    <button type="submit" id="send"> Send</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>

</body>
</html>